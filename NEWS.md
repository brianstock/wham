wham 1.0.6.9000
=========================

### Minor improvements

* Added ability to specify different F options for each year of projections to project_wham and prepare_projection [f763059](https://github.com/timjmiller/wham/commit/f763059a61fde0814f2de83ef2d08045a3ed59e0)
* Revised vignette on simulation studies [f763059](https://github.com/timjmiller/wham/commit/f763059a61fde0814f2de83ef2d08045a3ed59e0)

### Bug fixes

* Fix bug in simulation of M random effects with "ar1_y" option [77bbd94](https://github.com/timjmiller/wham/commit/77bbd946e4881216a439933473d1c58b21c270c3)
* Fix bug in check_projF which tests whether the F in projections is being specified correctly when FXSPR or F at catch is specified [c643d4b](https://github.com/timjmiller/wham/commit/c643d4ba8339c13dd4b9e3662aaa29f26d309624)
* Fix index proportions at age data specification in basic_info [issue 64](https://github.com/timjmiller/wham/issues/64) [a3e3afc](https://github.com/timjmiller/wham/commit/a3e3afc9b23e2ca4e3d369581dfcf2b33732686c)
* Fix age of full selection for N1_model = 1 [issue 56](https://github.com/timjmiller/wham/issues/56) [865ca3d](https://github.com/timjmiller/wham/commit/865ca3d304c2d5eddcf044fe3d3776ada42b07aa).

wham 1.0.6 (2022-04-08)
=========================

### Major improvements

* One-step-ahead prediction quantile residuals for age compositon observations for most log-likelihoods (Nielsen et al. in prep.) [80e3bba](https://github.com/timjmiller/wham/commit/80e3bbae0244bd1199f018dca53f09b08f5fd203).
* Can specify a prior distribution on fully-selected catchability (logit-scale) which is then estimated as a random effect [fcbc604](https://github.com/timjmiller/wham/commit/fcbc604068005cd7cce6c3f329376c2b4ef7b540).
* Auto-regressive random effects for fully-selected catchability [fcbc604](https://github.com/timjmiller/wham/commit/fcbc604068005cd7cce6c3f329376c2b4ef7b540).
* Environmental covariate effects on fully-selected catchability [fcbc604](https://github.com/timjmiller/wham/commit/fcbc604068005cd7cce6c3f329376c2b4ef7b540).
* One or more environmental covariates can have multiple effects on recruitment, M, and catchability [fcbc604](https://github.com/timjmiller/wham/commit/fcbc604068005cd7cce6c3f329376c2b4ef7b540).

### Minor improvements

* Expanded set of age composition models including allowing AR1 correlation for logistic-normal [80e3bba](https://github.com/timjmiller/wham/commit/80e3bbae0244bd1199f018dca53f09b08f5fd203).
* Example 11 script and vignette (and tests) added to demonstrated extensions for modeling catchability [173555d](https://github.com/timjmiller/wham/commit/173555d1485d52ca58aa77ae77fad856fa8b3bbb).
* New plots added to plot_wham_output.R and wham_plots_tables.R to include new catchability features [173555d](https://github.com/timjmiller/wham/commit/173555d1485d52ca58aa77ae77fad856fa8b3bbb).
* Added reporting of SPR-based reference points that use SPR inputs averged over the same years as they would for FXSPR in projection years [5d1cd9d](https://github.com/timjmiller/wham/commit/5d1cd9dd6b4ec8214e988be1fb4c5e6f4b51a661).
* Fixed and generalized configuration for estimation of observation error variances for environmental covariates for `prepare_wham_input` (`ecov$logsigma`) [a3328a9](https://github.com/timjmiller/wham/commit/a3328a9a9652a7fc3f0eb45ee4688fcdaa4334f7).
* Added tables (html or pdf) of estimated parameters, abundance at age, and fishing mortality at age to results generated by `plot_wham_output` [13094c6](https://github.com/timjmiller/wham/commit/13094c674a53d495021711531c083184e3c6b892).

### Bug fixes

* Fix age labeling for selectivity and numbers at age retro plots.
* Fix typo in set_NAA.r for N1_model option (issue [issue 55](https://github.com/timjmiller/wham/issues/55) caught by @Cole-Monnahan-NOAA).
* Fix errors in `prepare_wham_input` introduced in 1.0.5 when not all index data in `.dat` are used (aggregate or proportion-at-age, all years or a subset) [12abdef](https://github.com/timjmiller/wham/commit/12abdefb22e7b8b5f0640b0389b5e07fc7a00877)
* Updated version of `TMBhelper::check_estimability` is now internal [issue 47](https://github.com/timjmiller/wham/issues/47)
* Peel `which_F_age` (fix error when projecting a peel doing retrospective predictions, ex9)
* Ecov AR1 mean parameterization
* simulation of Dirichlet-multinomial age composition ([issue 49](https://github.com/timjmiller/wham/issues/49), caught by @seananderson).
* error reported in [issue 48](https://github.com/timjmiller/wham/issues/48). There is no `opt` element when do.fit = FALSE.
* `plot_wham_output` now removes any existing plot files in the directories where plots are saved before writing files so that any orphaned files from previous fits are not included in the results and html rendering.
* `plot_wham_output` now creates `.png` output by default because of 1) issues opening the `.html` in Firefox on Windows, and 2) it was annoying to close dozens of browser tabs during testing. issues [42](https://github.com/timjmiller/wham/issues/42) and [50](https://github.com/timjmiller/wham/issues/50), thanks to @ejosymart and @JDeroba.
* `set_catch` bug when catch age comp data exist for some years and not others

wham 1.0.5 (2021-08-25)
=========================

### Major improvements

* `prepare_wham_input` is now modularized and can take a "basic_info" argument or generate a dummy input for fit_wham without an asap3 object. This provides better organization and helps fix the operating model/MSE features that have been broken since version 1.0.0. Options have been added to NAA_re argument to configure how initial numbers at age and recruitment are treated. Including initial parameter values. A tenth example and vignette illustrate the usage to generate an assessment model without an asap3 file and a simple management strategy evaluation [9bc161d](https://github.com/timjmiller/wham/commit/87d87c9ded5c3fa58db779cbd1ac8eb911950e4e). 
  
### Minor improvements

* Options have been added to NAA_re argument to configure how initial numbers at age and recruitment are treated. Including initial parameter values.
* NOAA pkgdown website template, thanks to @Bai-Li-NOAA [7618bb](https://github.com/timjmiller/wham/commit/7618bb0427743fffbb6db49465fd8c2f73993719)
* Add `ecov$ages`, allows user to specify that an ecov only affects a subset of ages [e6518f](https://github.com/timjmiller/wham/commit/e6518f8f09f1c252517e6dc89b98776d687d417b) 

### Bug fixes

* Don't plot age comp residuals for fleets/indices/years that are not used [6876ee](https://github.com/timjmiller/wham/commit/6876eed1dd4bbdc7b26295356756bb7a30053887)
* Fix `Ecov_re` padding in projections with multiple ecovs that have different lags [a57f3b](https://github.com/timjmiller/wham/commit/a57f3b339881a39dbee3ab0ab190c732f855dec1)
* Default to use static reference points in projections (so ref pts are consistent across multiple projections) [74a6c3](https://github.com/timjmiller/wham/commit/74a6c3cda74e5f2f14a6471e410b227c407e0790)
* Diagnostic plots for log catch and indices did not use bias correction [issue 46](https://github.com/timjmiller/wham/issues/46). Now they do.
* Fixed bug in index diagnostic plot when index is in biomass and age comp is in numbers.

wham 1.0.4 (2021-05-03)
=========================

WHAM description + simulation test paper published: [https://doi.org/10.1016/j.fishres.2021.105967](https://doi.org/10.1016/j.fishres.2021.105967)

### Major improvements

* New ability to plot results from multiple ASAP3 and WHAM models together for comparison. Thanks to @liz-brooks for contributing `read_asap3_fit`! See `?compare_wham_models` and new [vignette 8](https://timjmiller.github.io/wham/articles/ex8_compare.html).

### Minor improvements

* New `save.sdrep = F` option to only save `summary(sdreport)` instead of `sdreport`. Can make saved models MUCH smaller (e.g. 2 MB vs. 150 MB). ([2f8875](https://github.com/timjmiller/wham/commit/2f8875323c0d6845a92444a9e7d4aaa92fe29d8d)).
* Added `proj.opts$percentFXSPR` option, percent of F_XSPR to use for calculating catch in projections. For example, GOM cod uses F = 75% F_XSPR, so `proj.opts$percentFXSPR = 75`.
* Added `proj.opts$useFMSY` and `proj.opts$percentFMSY` options, to project population and catches at (a percentage of) F_MSY. ([467532](https://github.com/timjmiller/wham/commit/46753202499cbf256fb79796f8570e045dddb9db))
* Allow peels to be projected so can do retrospective predictions, as in Fig. 4 of [Xu et al. 2018](https://onlinelibrary.wiley.com/doi/abs/10.1111/fog.12236). See new [vignette 9](https://timjmiller.github.io/wham/articles/ex9_retro_pred.html). ([e1e00c](https://github.com/timjmiller/wham/commit/e1e00c712fcba0d0631dd9321e3bb83b87a1485f#diff-7f3a4433e0573f6fd6787d47614e0303f714e2d71d9e618ecfb832195987b732))

### Bug fixes

* Broken links in vignettes (thanks to @tcarruth)
* Plotting issue with Ecov OSA residuals and peels (thanks to @h-du-pontavice, [1163df](https://github.com/timjmiller/wham/commit/1163df4290387174a5336ada98a13dc0f5a9644c))
* Double logistic selectivity setup in `prepare_wham_input` (thanks to @tcarruth, [f270dd](https://github.com/timjmiller/wham/commit/f270ddb66d253ac2aaf9a0109631b89036ddcd5e))
* `tryCatch` error assignment issues ([9d5c87](https://github.com/timjmiller/wham/commit/9d5c8792769dae9e640da3ad44b7f3e6b74e4a87))
* Remove error in default projection options (`percentSPR`)
* Setting up projections with multiple Ecovs (again thanks to @h-du-pontavice, [42a6a4](https://github.com/timjmiller/wham/commit/42a6a4950e85613219525e89c5590c37f3a6369f))
* Selectivity parameter initial values set to middle of range if unspecified in `prepare_wham_input`
* Fixed `fit_tmb` to make `$final_gradient` reported by wham equivalent to `sdreport()$gradient.fixed`. Issue was that the `model$env$last.par.best` is not updated by the newton steps after optimization so `model$opt$par` was slightly different (10^(-7) or smaller). [e20bd8](https://github.com/timjmiller/wham/commit/e20bd8d01a32b1cbdb826905257555f9a8b55c75)
* Factor order problem caused indices to be out of order when > 9 indices present. [9e0141](https://github.com/timjmiller/wham/commit/9e0141b59bb80d17b9fc79662e3f38b24b8991f1)
* Fixed default determination of age corresponding to fully selected (total) fishing mortality. Now `which_F_age` is a vector of annual values (including projection years) and the values are reassigned after fitting before reporting. ([189b6c](https://github.com/timjmiller/wham/commit/189b6cede494a53763afcda5b0bf6854fed095d5))
* Added check for F_XSPR to verify percent of SPR0 is correct and, in projections, catch at F from catch is verified. Initial values for these algorithms can be specified by the user. ([189b6c](https://github.com/timjmiller/wham/commit/189b6cede494a53763afcda5b0bf6854fed095d5))
* If ecov years differ from model years, peel to same year in `fit_peel` ([e1e00c](https://github.com/timjmiller/wham/commit/e1e00c712fcba0d0631dd9321e3bb83b87a1485f))

wham 1.0.3 (2021-02-05)
=========================

### Minor improvements

* allow for multiple ecov effects on recruitment and M
* add WHAM version to model object (version and GitHub commit). Requires `sessioninfo` package (within `devtools`).
* for SCAA (recruitment as fixed effects), treat recruitment in projections as random effects with mean and SD calculated from model years (previously was fixed at `exp(10)`). This approximates ASAP + AgePro, allows for simulating projected recruitment according to the ECDF.

### Bug fixes

* clean up error messages (remove global `err` object) [53f5ec6](https://github.com/timjmiller/wham/commit/53f5ec67a6f60ea85b928debc4a57d0ee6673e78)
* adjust age composition variance (`tau`) by effective sample size (`Neff`) for option 7 [4c13331](https://github.com/timjmiller/wham/commit/4c133312b2ecaab3972be13a96b4b456d9c1f6b0)

wham 1.0.2 (2020-12-14)
=========================

### Minor improvements

* add `1e-15` to predicted proportions to make age composition likelihoods robust to 0 predictions when selAA is fixed at 0. This affects the multinomial, Dirichlet, and Dirichlet-multinomial (options 1-3), since the logistic normal (options 4-7) already did this. [88f15d4](https://github.com/timjmiller/wham/commit/88f15d4a51f69a3d649d76bcac0a8cf299c3135e)
* specify age composition model using `age_comp` argument to `prepare_wham_input`. See [`?prepare_wham_input`](https://timjmiller.github.io/wham/reference/prepare_wham_input.html) for details. [fd94b3d](https://github.com/timjmiller/wham/commit/fd94b3dcaf189482e10a6750c2f1b8350837fd48)
* estimate age-specific M for any age(s) ([60f1358](https://github.com/timjmiller/wham/commit/60f13584e515950bf43f358c5a0cfdb0e8a30241))

### Bug fixes

* check for sel par inits outside lower/upper bounds ([4ed394b](https://github.com/timjmiller/wham/commit/4ed394bac38d6054727bc4d3e17c8f4452ae8289))
* fleet weight-at-age pointers fixed ([059e66a](https://github.com/timjmiller/wham/commit/059e66a1cc6e90554862b3e30e815cf0d5cd18ab))
* couple small fixes to handle multiple Ecovs ([9e46b48](https://github.com/timjmiller/wham/commit/9e46b4818e01b2bfd12e500bd4376869001f265e))

wham 1.0.1 (2020-11-12)
=========================

### Minor improvements

* `run_all_examples.R` script to test all examples work
* new vignette on debugging WHAM models

### Bug fixes

* update `tidyr::gather` to `tidyr::pivot_longer` ([80bf89a](https://github.com/timjmiller/wham/commit/80bf89a69975a4ac5c037127d094afc3b00b7f59))
* if all selpars fixed then use ASAP file inits ([2887e87](https://github.com/timjmiller/wham/commit/2887e87aa4af08530765fbf04c002a00afd8efa1))
* update example scripts 4, 5, 6 ([31cb9a9](https://github.com/timjmiller/wham/commit/31cb9a931a83e9c76e5d63fd52243de917fe7c99))
* avoid font family warnings on Windows ([af42be4](https://github.com/timjmiller/wham/commit/af42be4d940785539f00e3ec29a85c605ef2a0de))

wham 1.0.0 (2020-10-07)
=========================

* This is the first release of WHAM.

